import{e as O,H as A,d as b,s as E,f as L,b as D,g as y,i as H,j as I,k,l as V,h as m,m as q}from"./disclose-version.4Tc5yaFz.js";import{t as M,q as Y,i as j,j as B,k as C,l as P,m as W,n as $,p as z,o as F,h as G,c as J}from"./runtime.DZmSjpD9.js";const K=new Set,R=new Set;function Q(t,r,n,o){function a(e){if(o.capture||p.call(r,e),!e.cancelBubble)return n.call(this,e)}return t.startsWith("pointer")||t==="wheel"?Y(()=>{r.addEventListener(t,a,o)}):r.addEventListener(t,a,o),a}function tr(t,r,n,o,a){var e={capture:o,passive:a},u=Q(t,r,n,e);(r===document.body||r===window||r===document)&&M(()=>{r.removeEventListener(t,u,e)})}function p(t){var S;var r=this,n=r.ownerDocument,o=t.type,a=((S=t.composedPath)==null?void 0:S.call(t))||[],e=a[0]||t.target,u=0,l=t.__root;if(l){var f=a.indexOf(l);if(f!==-1&&(r===document||r===window)){t.__root=r;return}var c=a.indexOf(r);if(c===-1)return;f<=c&&(u=f)}if(e=a[u]||t.target,e!==r){j(t,"currentTarget",{configurable:!0,get(){return e||n}});try{for(var h,s=[];e!==null;){var d=e.parentNode||e.host||null;try{var i=e["__"+o];if(i!==void 0&&!e.disabled)if(B(i)){var[g,...v]=i;g.apply(e,[t,...v])}else i.call(e,t)}catch(w){h?s.push(w):h=w}if(t.cancelBubble||d===r||d===null)break;e=d}if(h){for(let w of s)queueMicrotask(()=>{throw w});throw h}}finally{t.__root=r,e=r}}}const U=["wheel","touchstart","touchmove","touchend","touchcancel"];function X(t){return U.includes(t)}function er(t,r){(t.__t??(t.__t=t.nodeValue))!==r&&(t.nodeValue=t.__t=r)}function Z(t,r){const n=r.anchor??r.target.appendChild(O());return N(t,{...r,anchor:n})}function ar(t,r){r.intro=r.intro??!1;const n=r.target,o=m,a=y;try{for(var e=n.firstChild;e&&(e.nodeType!==8||e.data!==A);)e=e.nextSibling;if(!e)throw b;E(!0),L(e),D();const u=N(t,{...r,anchor:e});if(y===null||y.nodeType!==8||y.data!==H)throw I(),b;return E(!1),u}catch(u){if(u===b)return r.recover===!1&&C(),k(),V(n),E(!1),Z(t,r);throw u}finally{E(o),L(a)}}const _=new Map;function N(t,{target:r,anchor:n,props:o={},events:a,context:e,intro:u=!0}){k();var l=new Set,f=s=>{for(var d=0;d<s.length;d++){var i=s[d];if(!l.has(i)){l.add(i);var g=X(i);r.addEventListener(i,p,{passive:g});var v=_.get(i);v===void 0?(document.addEventListener(i,p,{passive:g}),_.set(i,1)):_.set(i,v+1)}}};f(P(K)),R.add(f);var c=void 0,h=W(()=>($(()=>{if(e){z({});var s=J;s.c=e}a&&(o.$$events=a),m&&q(n,null),c=t(n,o)||{},m&&(F.nodes.end=y),e&&G()}),()=>{for(var s of l){r.removeEventListener(s,p);var d=_.get(s);--d===0?(document.removeEventListener(s,p),_.delete(s)):_.set(s,d)}R.delete(f),T.delete(c)}));return T.set(c,h),c}let T=new WeakMap;function nr(t){const r=T.get(t);r==null||r()}export{tr as e,ar as h,Z as m,er as s,nr as u};
